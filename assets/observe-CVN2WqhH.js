import{n as P}from"./vue-Bti5_fTi.js";function Y(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var x={},V;function Z(){return V||(V=1,function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function n(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch{return null}}var i=function(t){for(var e=t,r=n(e);r;)e=r.ownerDocument,r=n(e);return e}(window.document),a=[],u=null,l=null;function d(t){this.time=t.time,this.target=t.target,this.rootBounds=R(t.rootBounds),this.boundingClientRect=R(t.boundingClientRect),this.intersectionRect=R(t.intersectionRect||O()),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,r=e.width*e.height,o=this.intersectionRect,s=o.width*o.height;r?this.intersectionRatio=Number((s/r).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function c(t,e){var r=e||{};if(typeof t!="function")throw new Error("callback must be a function");if(r.root&&r.root.nodeType!=1&&r.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=f(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map(function(o){return o.value+o.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}c.prototype.THROTTLE_TIMEOUT=100,c.prototype.POLL_INTERVAL=null,c.prototype.USE_MUTATION_OBSERVER=!0,c._setupCrossOriginUpdater=function(){return u||(u=function(t,e){!t||!e?l=O():l=A(t,e),a.forEach(function(r){r._checkForIntersections()})}),u},c._resetCrossOriginUpdater=function(){u=null,l=null},c.prototype.observe=function(t){var e=this._observationTargets.some(function(r){return r.element==t});if(!e){if(!(t&&t.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},c.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._unmonitorIntersections(t.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},c.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},c.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},c.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(r,o,s){if(typeof r!="number"||isNaN(r)||r<0||r>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return r!==s[o-1]})},c.prototype._parseRootMargin=function(t){var e=t||"0px",r=e.split(/\s+/).map(function(o){var s=/^(-?\d*\.?\d+)(px|%)$/.exec(o);if(!s)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(s[1]),unit:s[2]}});return r[1]=r[1]||r[0],r[2]=r[2]||r[0],r[3]=r[3]||r[1],r},c.prototype._monitorIntersections=function(t){var e=t.defaultView;if(e&&this._monitoringDocuments.indexOf(t)==-1){var r=this._checkForIntersections,o=null,s=null;this.POLL_INTERVAL?o=e.setInterval(r,this.POLL_INTERVAL):(m(e,"resize",r,!0),m(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(s=new e.MutationObserver(r),s.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push(function(){var p=t.defaultView;p&&(o&&p.clearInterval(o),y(p,"resize",r,!0)),y(t,"scroll",r,!0),s&&s.disconnect()});var v=this.root&&(this.root.ownerDocument||this.root)||i;if(t!=v){var h=n(t);h&&this._monitorIntersections(h.ownerDocument)}}},c.prototype._unmonitorIntersections=function(t){var e=this._monitoringDocuments.indexOf(t);if(e!=-1){var r=this.root&&(this.root.ownerDocument||this.root)||i,o=this._observationTargets.some(function(h){var p=h.element.ownerDocument;if(p==t)return!0;for(;p&&p!=r;){var b=n(p);if(p=b&&b.ownerDocument,p==t)return!0}return!1});if(!o){var s=this._monitoringUnsubscribes[e];if(this._monitoringDocuments.splice(e,1),this._monitoringUnsubscribes.splice(e,1),s(),t!=r){var v=n(t);v&&this._unmonitorIntersections(v.ownerDocument)}}}},c.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var e=0;e<t.length;e++)t[e]()},c.prototype._checkForIntersections=function(){if(!(!this.root&&u&&!l)){var t=this._rootIsInDom(),e=t?this._getRootRect():O();this._observationTargets.forEach(function(r){var o=r.element,s=_(o),v=this._rootContainsTarget(o),h=r.entry,p=t&&v&&this._computeTargetAndRootIntersection(o,s,e),b=null;this._rootContainsTarget(o)?(!u||this.root)&&(b=e):b=O();var I=r.entry=new d({time:g(),target:o,boundingClientRect:s,rootBounds:b,intersectionRect:p});h?t&&v?this._hasCrossedThreshold(h,I)&&this._queuedEntries.push(I):h&&h.isIntersecting&&this._queuedEntries.push(I):this._queuedEntries.push(I)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},c.prototype._computeTargetAndRootIntersection=function(t,e,r){if(window.getComputedStyle(t).display!="none"){for(var o=e,s=T(t),v=!1;!v&&s;){var h=null,p=s.nodeType==1?window.getComputedStyle(s):{};if(p.display=="none")return null;if(s==this.root||s.nodeType==9)if(v=!0,s==this.root||s==i)u&&!this.root?!l||l.width==0&&l.height==0?(s=null,h=null,o=null):h=l:h=r;else{var b=T(s),I=b&&_(b),M=b&&this._computeTargetAndRootIntersection(b,I,r);I&&M?(s=b,h=A(I,M)):(s=null,o=null)}else{var C=s.ownerDocument;s!=C.body&&s!=C.documentElement&&p.overflow!="visible"&&(h=_(s))}if(h&&(o=w(h,o)),!o)break;s=s&&T(s)}return o}},c.prototype._getRootRect=function(){var t;if(this.root&&!S(this.root))t=_(this.root);else{var e=S(this.root)?this.root:i,r=e.documentElement,o=e.body;t={top:0,left:0,right:r.clientWidth||o.clientWidth,width:r.clientWidth||o.clientWidth,bottom:r.clientHeight||o.clientHeight,height:r.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},c.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(o,s){return o.unit=="px"?o.value:o.value*(s%2?t.width:t.height)/100}),r={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return r.width=r.right-r.left,r.height=r.bottom-r.top,r},c.prototype._hasCrossedThreshold=function(t,e){var r=t&&t.isIntersecting?t.intersectionRatio||0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(r!==o)for(var s=0;s<this.thresholds.length;s++){var v=this.thresholds[s];if(v==r||v==o||v<r!=v<o)return!0}},c.prototype._rootIsInDom=function(){return!this.root||k(i,this.root)},c.prototype._rootContainsTarget=function(t){var e=this.root&&(this.root.ownerDocument||this.root)||i;return k(e,t)&&(!this.root||e==t.ownerDocument)},c.prototype._registerInstance=function(){a.indexOf(this)<0&&a.push(this)},c.prototype._unregisterInstance=function(){var t=a.indexOf(this);t!=-1&&a.splice(t,1)};function g(){return window.performance&&performance.now&&performance.now()}function f(t,e){var r=null;return function(){r||(r=setTimeout(function(){t(),r=null},e))}}function m(t,e,r,o){typeof t.addEventListener=="function"?t.addEventListener(e,r,o):typeof t.attachEvent=="function"&&t.attachEvent("on"+e,r)}function y(t,e,r,o){typeof t.removeEventListener=="function"?t.removeEventListener(e,r,o):typeof t.detachEvent=="function"&&t.detachEvent("on"+e,r)}function w(t,e){var r=Math.max(t.top,e.top),o=Math.min(t.bottom,e.bottom),s=Math.max(t.left,e.left),v=Math.min(t.right,e.right),h=v-s,p=o-r;return h>=0&&p>=0&&{top:r,bottom:o,left:s,right:v,width:h,height:p}||null}function _(t){var e;try{e=t.getBoundingClientRect()}catch{}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):O()}function O(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function R(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function A(t,e){var r=e.top-t.top,o=e.left-t.left;return{top:r,left:o,height:e.height,width:e.width,bottom:r+e.height,right:o+e.width}}function k(t,e){for(var r=e;r;){if(r==t)return!0;r=T(r)}return!1}function T(t){var e=t.parentNode;return t.nodeType==9&&t!=i?n(t):(e&&e.assignedSlot&&(e=e.assignedSlot.parentNode),e&&e.nodeType==11&&e.host?e.host:e)}function S(t){return t&&t.nodeType===9}window.IntersectionObserver=c,window.IntersectionObserverEntry=d}()),x}function E(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(i){return typeof i}:E=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},E(n)}function q(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function B(n,i){for(var a=0;a<i.length;a++){var u=i[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function j(n,i,a){return i&&B(n.prototype,i),n}function L(n){return H(n)||z(n)||W(n)||$()}function H(n){if(Array.isArray(n))return D(n)}function z(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function W(n,i){if(n){if(typeof n=="string")return D(n,i);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return D(n,i)}}function D(n,i){(i==null||i>n.length)&&(i=n.length);for(var a=0,u=new Array(i);a<i;a++)u[a]=n[a];return u}function $(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G(n){var i;return typeof n=="function"?i={callback:n}:i=n,i}function J(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u,l,d,c=function(f){for(var m=arguments.length,y=new Array(m>1?m-1:0),w=1;w<m;w++)y[w-1]=arguments[w];if(d=y,!(u&&f===l)){var _=a.leading;typeof _=="function"&&(_=_(f,l)),(!u||f!==l)&&_&&n.apply(void 0,[f].concat(L(d))),l=f,clearTimeout(u),u=setTimeout(function(){n.apply(void 0,[f].concat(L(d))),u=0},i)}};return c._clear=function(){clearTimeout(u),u=null},c}function U(n,i){if(n===i)return!0;if(E(n)==="object"){for(var a in n)if(!U(n[a],i[a]))return!1;return!0}return!1}var K=function(){function n(i,a,u){q(this,n),this.el=i,this.observer=null,this.frozen=!1,this.createObserver(a,u)}return j(n,[{key:"createObserver",value:function(a,u){var l=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=G(a),this.callback=function(g,f){l.options.callback(g,f),g&&l.options.once&&(l.frozen=!0,l.destroyObserver())},this.callback&&this.options.throttle){var d=this.options.throttleOptions||{},c=d.leading;this.callback=J(this.callback,this.options.throttle,{leading:function(f){return c==="both"||c==="visible"&&f||c==="hidden"&&!f}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(g){var f=g[0];if(g.length>1){var m=g.find(function(w){return w.isIntersecting});m&&(f=m)}if(l.callback){var y=f.isIntersecting&&f.intersectionRatio>=l.threshold;if(y===l.oldResult)return;l.oldResult=y,l.callback(y,f)}},this.options.intersection),P(function(){l.observer&&l.observer.observe(l.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),n}();function F(n,i,a){var u=i.value;if(u)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var l=new K(n,u,a);n._vue_visibilityState=l}}function Q(n,i,a){var u=i.value,l=i.oldValue;if(!U(u,l)){var d=n._vue_visibilityState;if(!u){N(n);return}d?d.createObserver(u,a):F(n,{value:u},a)}}function N(n){var i=n._vue_visibilityState;i&&(i.destroyObserver(),delete n._vue_visibilityState)}var tt={beforeMount:F,updated:Q,unmounted:N};export{tt as O,Y as g,Z as r};
//# sourceMappingURL=observe-CVN2WqhH.js.map
